SyntaxHighlighter.config.clipboardSwf=path+"/syntaxhighlighter/scripts/clipboard.swf";SyntaxHighlighter.all();var pId;$(window).load(function(){var d=$("img.lazy");if(d.size()>3){var e={};d.each(function(j,f){var h=$(f);var k=h.offset().top;var g=parseInt(k/1200);if(e[g]){e[g].push(h)}else{e[g]=[];e[g].push(h)}});function c(){var g=$(document.body).scrollTop();var f=parseInt(g/1200)+1;if(e[f]){$.each(e[f],function(j,h){if(/img\/s/g.test(h.attr("src"))){h.attr("src",h.attr("data-src"))}})}f=parseInt(g/1200);if(e[f]){$.each(e[f],function(j,h){if(/img\/s/g.test(h.attr("src"))){h.attr("src",h.attr("data-src"))}})}}$(window).scroll(function(){c()});c()}else{d.each(function(g,f){f.src=f.getAttribute("data-src")})}var a=['<table id="comment_table" cellspacing="0" cellpadding="0">','<tr><td>昵称:</td><td><input type="text" class="w_170" id="comment_nick"></td></tr>','<tr><td>邮箱:</td><td><input type="text" class="w_170" id="comment_email"></td></tr>','<tr><td valign="top">内容:</td><td><textarea class="w_170" id="comment_content"></textarea></td></tr>','<tr><td><button type="button" id="submit_comment">提交评论</button></td><td><button type="button" id="cancel_comment">取消评论</button></td></tr></table>'].join("");function b(){var g=$("#comment_email").val();var h=$("#comment_content").val();var f=$("#comment_nick").val();if(f.length<3){message("请填写您的昵称,长度不少3个字");$("#comment_nick").focus();return false}if(!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(g)){message("请正确填写邮箱");$("#comment_email").focus();return false}if(h.length<5){message("请填写评论内容,内容最少5个字");$("#comment_content").focus();return false}$.post(path+"/article/addComment",{"comment.email":g,"comment.content":h,"comment.articleId":article_id,"comment.nick":f,"comment.pId":pId},function(i){message("评论成功~,刷新后可查看");$("#comment_table").remove()})}$(".add_comment").click(function(){if($("#comment_table").size()>0){message("请先提交您之前的评论，再评论");return}var g=$(this);pId=g.attr("data-id")||"0";var f=$(a);g.after(f);f.find("#submit_comment").click(function(){b()});f.find("#cancel_comment").click(function(){f.remove()})})});